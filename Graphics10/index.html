<script src=CT_Modeler.js></script>

<body bgcolor=white>
<center>
<canvas id='canvas1' width='480' height='480'></canvas>
</center>
</body>

<script>
   function getTime() { return (new Date()).getTime() / 1000; }

   var scene = new CT.Scene(canvas1);
   scene.setLight(0, [ 1, 1, 1]);
   scene.setLight(1, [-1,-1,-1], [.1, .05, 0]);

   var root = new CT.Node();
   scene.add(root);
/*
   root.addChild(new CT.Torus(32, 16, .6));
*/
   //var shape1 = root.addChild(new CT.Cube());
   var body = root.addChild(new CT.Node());
   
  var bodyMesh = body.addChild(new CT.Sphere());
  bodyMesh.scale([.8,.4,.6]);
   
   // Left Leg
   
   var leftJoint = body.addChild(new CT.Node());
   
   var leftUpperLeg = leftJoint.addChild(new CT.Node());
   
   var leftUpperLegMesh = leftUpperLeg.addChild(new CT.Cylinder());
   
   var leftKnee = leftJoint.addChild(new CT.Node());
   
   var leftLowerLeg = leftKnee.addChild(new CT.Cylinder());
   
   // Right Leg
   
   
   var rightJoint = body.addChild(new CT.Node());
   
   var rightUpperLeg = rightJoint.addChild(new CT.Node());
   
   var rightUpperLegMesh = rightUpperLeg.addChild(new CT.Cylinder());
   
   var rightKnee = rightJoint.addChild(new CT.Node());
   
   var rightLowerLeg = rightKnee.addChild(new CT.Cylinder());
   
   // back left Leg
   
   var backleftJoint = body.addChild(new CT.Node());
   
   var backleftUpperLeg = backleftJoint.addChild(new CT.Node());
   
   var backleftUpperLegMesh = backleftUpperLeg.addChild(new CT.Cylinder());
   
   var backleftKnee = backleftJoint.addChild(new CT.Node());
   
   var backleftLowerLeg = backleftKnee.addChild(new CT.Cylinder());
   
   // back Right Leg
   
   
   var backrightJoint = body.addChild(new CT.Node());
   
   var backrightUpperLeg = backrightJoint.addChild(new CT.Node());
   
   var backrightUpperLegMesh = backrightUpperLeg.addChild(new CT.Cylinder());
   
   var backrightKnee = backrightJoint.addChild(new CT.Node());
   
   var backrightLowerLeg = backrightKnee.addChild(new CT.Cylinder());
   
   //Head
   
   var head = body.addChild(new CT.Sphere());
   head.scale([.45,.35,.45]).translate([-2,.5,0]);
   
   var eye1 = head.addChild(new CT.Sphere());
   eye1.scale([.3,.4,.3]).translate([-.2,3,1]);
   
   var eye2 = head.addChild(new CT.Sphere());
   eye2.scale([.3,.4,.3]).translate([-.2,3,-1]);
   
   var startTime = getTime();
   (function update() {
      CT.time = (getTime() - startTime)*2;

      root.identity()
	  .rotateY(CT.time/2)
	  .scale(.3)
	  .translate([0,Math.abs(Math.cos(CT.time/2+750))/2,0]);
	  
	  
	  //Left Leg
	   leftJoint.identity().translate(-.3,0,.2)
	   .rotateX(Math.PI/2.5)
	   .rotateY(Math.sin(CT.time+500)-Math.PI/8);

	   leftUpperLeg.identity().translate([0,0,.5])
	.scale([.1,.1,.3]);
	   
	   var x = .85;
   leftKnee.identity().translate([0,0,x]).rotateY(Math.abs(Math.cos(CT.time/2)));
   
   leftLowerLeg.identity().translate([0,0,x/2]).scale([.1,.1,.5]);
   
   // Right Leg
   
	  
	   rightJoint.identity().translate(.3,0,.3)
	   .rotateX(Math.PI/2)
	   .rotateY(Math.sin(CT.time)+Math.PI/10);

	   rightUpperLeg.identity().translate([0,0,.5])
	.scale([.1,.1,.3]);
	   
	   var x = .85;
   rightKnee.identity().translate([0,0,x]).rotateY(Math.abs(Math.cos(CT.time/2)));
   
   rightLowerLeg.identity().translate([0,0,x/2]).scale([.1,.1,.5]);
      //root.identity()
		
		
		// Back
		
	  //Left Leg
	   backleftJoint.identity().translate(-.3,0,-.2)
	   .rotateX(Math.PI/1.5)
	   .rotateY(Math.sin(CT.time+500)-Math.PI/8);

	   backleftUpperLeg.identity().translate([0,0,.5])
	.scale([.1,.1,.3]);
	   
	   var x = .85;
   backleftKnee.identity().translate([0,0,x]).rotateY(Math.abs(Math.cos(CT.time/2)));
   
   backleftLowerLeg.identity().translate([0,0,x/2]).scale([.1,.1,.5]);
   
   // Right Leg
   
	  
	   backrightJoint.identity().translate(.3,0,-.3)
	   .rotateX(Math.PI/2)
	   .rotateY(Math.sin(CT.time)+Math.PI/10);

	   backrightUpperLeg.identity().translate([0,0,.5])
	.scale([.1,.1,.3]);
	   
	   var x = .85;
   backrightKnee.identity().translate([0,0,x]).rotateY(Math.abs(Math.cos(CT.time/2)));
   
   backrightLowerLeg.identity().translate([0,0,x/2]).scale([.1,.1,.5]);

   bodyMesh.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time/2),.1, .5,.5,5,10]);
leftUpperLegMesh.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time*3),.1, .5,.5,5,10]);
leftLowerLeg.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time/1.2),.1, .5,.5,5,10]);
rightUpperLegMesh.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time*2.7),.1, .5,.5,5,10]);
rightLowerLeg.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time*1.4),.1, .5,.5,5,10]);
backleftUpperLegMesh.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time/7),.1, .5,.5,5,10]);
backleftLowerLeg.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time*10),.1, .5,.5,5,10]);
backrightUpperLegMesh.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time+1000),.1, .5,.5,5,10]);
backrightLowerLeg.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time/4),.1, .5,.5,5,10]);
head.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time*2),.1, .5,.5,5,10]);
eye1.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time*1.8),.1, .5,.5,5,10]);
eye2.setPhong([0,0,0, .1,.5+.5*Math.sin(CT.time*6),.1, .5,.5,5,10]);
	  
      root.draw();

      setTimeout(update, 1000 / 60);
   })();
</script>

